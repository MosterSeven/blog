<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前期准备 | Moster Seven&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/cloudy.png">
    <script src="/blog/js/publish.admonition.js"></script>
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/blog/assets/css/0.styles.3d015f39.css" as="style"><link rel="preload" href="/blog/assets/js/app.9edf8fdb.js" as="script"><link rel="preload" href="/blog/assets/js/2.2defd20b.js" as="script"><link rel="preload" href="/blog/assets/js/13.b46fb602.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.e1c30886.js"><link rel="prefetch" href="/blog/assets/js/11.df05a378.js"><link rel="prefetch" href="/blog/assets/js/12.f4eec353.js"><link rel="prefetch" href="/blog/assets/js/14.6338f18a.js"><link rel="prefetch" href="/blog/assets/js/15.59f6d748.js"><link rel="prefetch" href="/blog/assets/js/16.ee9e7580.js"><link rel="prefetch" href="/blog/assets/js/17.2770244e.js"><link rel="prefetch" href="/blog/assets/js/18.f925006b.js"><link rel="prefetch" href="/blog/assets/js/19.8278d32a.js"><link rel="prefetch" href="/blog/assets/js/20.19822424.js"><link rel="prefetch" href="/blog/assets/js/21.3b527dd1.js"><link rel="prefetch" href="/blog/assets/js/3.ffc2dd12.js"><link rel="prefetch" href="/blog/assets/js/4.da8b72e6.js"><link rel="prefetch" href="/blog/assets/js/5.9d8f8f26.js"><link rel="prefetch" href="/blog/assets/js/6.f2a96706.js"><link rel="prefetch" href="/blog/assets/js/7.00a1ebb2.js"><link rel="prefetch" href="/blog/assets/js/8.cae582de.js"><link rel="prefetch" href="/blog/assets/js/9.a6774616.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.3d015f39.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/avatar.png" alt="Moster Seven's blog" class="logo"> <span class="site-name can-hide">Moster Seven's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/studyNote/frontend/front_end.html" class="nav-link">
  前端笔记
</a></div><div class="nav-item"><a href="/blog/studyNote/backend/back_end.html" class="nav-link">
  后端笔记
</a></div><div class="nav-item"><a href="https://www.cnblogs.com/MosterSeven/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/mosterseven" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/studyNote/backend/geth_eth_study.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/blog/language/english/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/blog/language/japanese/" class="nav-link">
  日本語
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/studyNote/frontend/front_end.html" class="nav-link">
  前端笔记
</a></div><div class="nav-item"><a href="/blog/studyNote/backend/back_end.html" class="nav-link">
  后端笔记
</a></div><div class="nav-item"><a href="https://www.cnblogs.com/MosterSeven/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/mosterseven" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/studyNote/backend/geth_eth_study.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/blog/language/english/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/blog/language/japanese/" class="nav-link">
  日本語
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前期准备</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/studyNote/backend/geth_eth_study.html#前期准备" class="sidebar-link">前期准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#step-1-客户端下载" class="sidebar-link">Step 1 ：客户端下载</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#step-2-准备目录结构" class="sidebar-link">Step 2：准备目录结构</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#step-3-准备创世区块配置文件" class="sidebar-link">Step 3：准备创世区块配置文件</a></li></ul></li><li><a href="/blog/studyNote/backend/geth_eth_study.html#geth常用参数说明" class="sidebar-link">Geth常用参数说明</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/studyNote/backend/geth_eth_study.html#geth常用命令" class="sidebar-link">Geth常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#初始化命令" class="sidebar-link">初始化命令</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#开启节点命令" class="sidebar-link">开启节点命令</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#日志相关指令" class="sidebar-link">日志相关指令</a></li></ul></li><li><a href="/blog/studyNote/backend/geth_eth_study.html#钱包账户导入" class="sidebar-link">钱包账户导入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#本地账户导入metamask" class="sidebar-link">本地账户导入Metamask</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#metamask账户导入本地区块链" class="sidebar-link">Metamask账户导入本地区块链</a></li></ul></li><li><a href="/blog/studyNote/backend/geth_eth_study.html#geth管理后台常用命令" class="sidebar-link">Geth管理后台常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看此节点所有账户" class="sidebar-link">查看此节点所有账户</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#新建账户" class="sidebar-link">新建账户</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#余额查询" class="sidebar-link">余额查询</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#单位转换" class="sidebar-link">单位转换</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#矿工相关指令" class="sidebar-link">矿工相关指令</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看-coinbase-账户" class="sidebar-link">查看 Coinbase 账户</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#修改-coinbase-账户" class="sidebar-link">修改 Coinbase 账户</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#发起交易" class="sidebar-link">发起交易</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#解锁账户" class="sidebar-link">解锁账户</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查询交易状态" class="sidebar-link">查询交易状态</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看交易信息" class="sidebar-link">查看交易信息</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#通过交易哈希查询数据" class="sidebar-link">通过交易哈希查询数据</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看当前区块总数" class="sidebar-link">查看当前区块总数</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看区块" class="sidebar-link">查看区块</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#连接到其他节点" class="sidebar-link">连接到其他节点</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看其他连接节点" class="sidebar-link">查看其他连接节点</a></li><li class="sidebar-sub-header"><a href="/blog/studyNote/backend/geth_eth_study.html#查看已连接节点数" class="sidebar-link">查看已连接节点数</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前期准备"><a href="#前期准备" class="header-anchor">#</a> 前期准备</h2> <h3 id="step-1-客户端下载"><a href="#step-1-客户端下载" class="header-anchor">#</a> Step 1 ：客户端下载</h3> <p>下载geth客户端  https://geth.ethereum.org/downloads/</p> <h3 id="step-2-准备目录结构"><a href="#step-2-准备目录结构" class="header-anchor">#</a> Step 2：准备目录结构</h3> <p>随便新建个文件夹放数据，目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>document
|--file_location // 这个里面放geth生成的数据啥的
|
|--genesis.json // 创世区块配置文件
</code></pre></div><h3 id="step-3-准备创世区块配置文件"><a href="#step-3-准备创世区块配置文件" class="header-anchor">#</a> Step 3：准备创世区块配置文件</h3> <p>genesis.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//区块链的ID，随便起</span>
        <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
        <span class="token property">&quot;homesteadBlock&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;eip150Block&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;eip155Block&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;eip158Block&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 用来预置账号以及账号内的以太币数量，应该也就是所谓的预挖</span>
  <span class="token comment">// 我这里不需要预挖，所以给了个空对象</span>
  <span class="token comment">// 如果需要可以这样加</span>
  <span class="token comment">// &quot;alloc&quot;: {</span>
  <span class="token comment">//            &quot;0x0000000000000000000000000000000000000001&quot;: {&quot;balance&quot;: &quot;111111111&quot;},</span>
  <span class="token comment">//            &quot;0x0000000000000000000000000000000000000002&quot;: {&quot;balance&quot;: &quot;222222222&quot;}</span>
  <span class="token comment">//         }</span>
  <span class="token property">&quot;alloc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 币基地址，也就是默认的钱包地址，因为我没有地址，所以全0，为空</span>
  <span class="token comment">// 后面运行Geth后创建新账户时，如果Geth发现没有币基地址，会默认将第一个账户的地址设置为币基地址</span>
  <span class="token comment">// 也就是矿工账号</span>
  <span class="token property">&quot;coinbase&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 出块/挖矿难度，你可以随便控制哦，这里设置的难度比较小，因为我喜欢钱来得快</span>
  <span class="token property">&quot;difficulty&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x4000&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 附加信息，随便填个文本或不填也行，类似中本聪在比特币创世块中写的报纸新闻</span>
  <span class="token property">&quot;extraData&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// gas最高限制，以太坊运行交易，合约等所消耗的gas最高限制，这里设置为最高</span>
  <span class="token property">&quot;gasLimit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0xffffffff&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊黄皮书中的要求</span>
  <span class="token comment">// 直接用我这个也可以</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x0000000000000042&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 与nonce共同用于挖矿，注意他和nonce的设置需要满足以太坊黄皮书中的要求</span>
  <span class="token property">&quot;mixhash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 上一个区块的Hash值，因为是创世块，石头里蹦出来的，没有在它前面的，所以是0</span>
  <span class="token property">&quot;parentHash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 创世块的时间戳，这里给0就好</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x00&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意 genesis.json 文件里不能有注释，用的时候记得删了！</p></blockquote> <p>对应字段说明：</p> <table><thead><tr><th style="text-align:left;"><strong>key</strong></th> <th style="text-align:center;"><strong>说明</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">chainId</td> <td style="text-align:center;">网络ID，区分不同的区块链网络，值为0代表以太坊主网</td></tr> <tr><td style="text-align:left;">coinbase</td> <td style="text-align:center;">一个账户地址，挖矿收益最终归属的账户</td></tr> <tr><td style="text-align:left;">difficulty</td> <td style="text-align:center;">挖矿难度</td></tr> <tr><td style="text-align:left;">gasLimit</td> <td style="text-align:center;">创世块能够消耗gas的上限，即最多消耗的gas值；智能合约运行在EVM上，运行机器码指令，每个指令都会对应相应的gas消耗，gas与以太不是等价的，它们之前有换算关系，gas * gasPrice = ether， gasPrice是gas单价（单位wei），可以上下浮动（感觉跟市场油价一样会发生变动）</td></tr> <tr><td style="text-align:left;">nonce</td> <td style="text-align:center;">随机数，挖矿的时候寻找到符合条件的nonce值</td></tr> <tr><td style="text-align:left;">mixhash</td> <td style="text-align:center;">本块的hash值，因为是创世块，所以没有hash值，初始化为0</td></tr> <tr><td style="text-align:left;">parentHash</td> <td style="text-align:center;">父块hash值，因为是创世块，所以没有父块hash值，初始化为0</td></tr> <tr><td style="text-align:left;">timestamp</td> <td style="text-align:center;">时间戳，是从1970-01-01 00:00:00开始计算以秒为单位</td></tr></tbody></table> <h2 id="geth常用参数说明"><a href="#geth常用参数说明" class="header-anchor">#</a> Geth常用参数说明</h2> <blockquote><p>可以通过 <code>geth -h</code> 帮助指令查看所以指令及对应功能说明，以下常用指令说明</p></blockquote> <table><thead><tr><th style="text-align:left;">指令</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">--datadir</td> <td style="text-align:left;">指定之前初始化的数据目录文件（指定工作目录）</td></tr> <tr><td style="text-align:left;">--networkid</td> <td style="text-align:left;">区分不同的区块链网络，与创世块chainId一样，0为以太坊主网</td></tr> <tr><td style="text-align:left;">--port</td> <td style="text-align:left;">节点之间互相通信的端囗，默认是30303</td></tr> <tr><td style="text-align:left;">--rpc</td> <td style="text-align:left;">开启远程调用服务，执行智能合约时连接的节点是借助于rpc服务</td></tr> <tr><td style="text-align:left;">--rpcport</td> <td style="text-align:left;">远程服务端囗，默认是8545</td></tr> <tr><td style="text-align:left;">--rpcapi</td> <td style="text-align:left;"><span style="white-space:pre;"></span>远程服务提供的远程服务调用函数集（db、net、eth、web3、personal等）</td></tr> <tr><td style="text-align:left;">--rpccorsdomain</td> <td style="text-align:left;">指定可以接收请求来源的域名列表（浏览器访问时必须开启），默认为 “<code>*</code>”</td></tr> <tr><td style="text-align:left;">--gasprice</td> <td style="text-align:left;">gas的单价，单位wei</td></tr> <tr><td style="text-align:left;">--allow-insecure-unlock</td> <td style="text-align:left;">允许在Geth命令窗囗解锁账户（新版本1.9.0+增加的选项）</td></tr> <tr><td style="text-align:left;">--console</td> <td style="text-align:left;">进入管理后台（如修改rpc端囗）</td></tr></tbody></table> <h2 id="geth常用命令"><a href="#geth常用命令" class="header-anchor">#</a> Geth常用命令</h2> <h3 id="初始化命令"><a href="#初始化命令" class="header-anchor">#</a> 初始化命令</h3> <div class="language- extra-class"><pre><code>第一次安装完Geth需要初始化，或是需要修改创世块重新设置时需要初始化，之后再不需要初始化。
</code></pre></div><p>cmd 进入到 file_location 文件夹(也就是 genesis.json 所在的文件夹)</p> <div class="language- extra-class"><pre class="language-text"><code>geth --datadir file_location init genesis.json
</code></pre></div><p><code>geth ...... init</code>：初始化区块链
参数：</p> <ul><li><code>--datadir file_location</code>：指定数据存放目录为 file_location 位置，file_location 为目录名</li> <li><code>genesis.json</code> 是 <code>init</code> 的命令参数，表示使用此 json 文件进行初始化</li></ul> <blockquote><p>初始化最后输出 <code>Successfully xxxxx</code> 就代表成功了</p></blockquote> <p>生成目录结构</p> <div class="language- extra-class"><pre class="language-text"><code>document
├──file_location
│   ├── geth
│   │   ├── chaindata
│   │   │   ├── 000001.log
│   │   │   ├── CURRENT
│   │   │   ├── LOCK
│   │   │   ├── LOG
│   │   │   └── MANIFEST-000000
│   │   └── lightchaindata
│   │       ├── 000001.log
│   │       ├── CURRENT
│   │       ├── LOCK
│   │       ├── LOG
│   │       └── MANIFEST-000000
│   └── keystore       // 这里以后会放在此节点创建的账号文件啥的
│           ├── 
└── genesis.json
 
</code></pre></div><h3 id="开启节点命令"><a href="#开启节点命令" class="header-anchor">#</a> 开启节点命令</h3> <p>cmd 进入到 document 文件夹(也就是 file_location 上层文件夹)</p> <div class="language- extra-class"><pre class="language-text"><code>geth --datadir file_location --networkid 202339 --http --http.addr 0.0.0.0 --http.port 8545 --http.corsdomain &quot;*&quot; --port 30305 --allow-insecure-unlock console
</code></pre></div><ul><li><code>--networkid</code>：用于区分不同的区块链网络，与创世块chainId一样，0为以太坊主网</li> <li><code>--http</code> <ul><li><code>.addr</code></li> <li><code>.port</code></li> <li><code>.corsdomain</code></li></ul></li> <li><code>--port</code></li> <li><code>--allow-insecure-unlock</code></li></ul> <p>运行完上面的代码后cmd内应该输出 <code>Welcome to the Geth JavaScript console!</code></p> <div class="custom-block warning"><p class="custom-block-title">可能出现的报错</p> <ul><li>错误1：<code>Fatal: Error starting protocol stack: Access is denied.</code> <ul><li>错误原因：因为你开启了 2 个或以上的 geth 进程。</li> <li>解决方法：需要关闭另外的 ethereum 客户端。</li></ul></li></ul></div> <p>从cmd连接刚刚启动的私有链的控制台
<code>geth attach ipc:http://127.0.0.1:8545</code></p> <p>删除 filename位置的块
<code>geth removedb --datadir filename</code></p> <h3 id="日志相关指令"><a href="#日志相关指令" class="header-anchor">#</a> 日志相关指令</h3> <p>在启动 Geth 的指令后加 <code>console</code> 指令就可以开启节点的同时开启 console控制台。</p> <p>但是节点启动后会一直在终端打印日志，这个时候可以使用以下两种指令来停止终端打印日志。</p> <p>如果不需要日志，将他们重定向到 <code>dev/null</code> 的位置即可；如果还需要日志，那么可以把 <code>dev/null</code> 的路径换成一个文本文件的路径，日志将会被存入其中。</p> <p>日志中提供的详细程度可以通过向 <code>--verbosity</code> 标志提供一个1-6之间的值来调整，如下例所示。</p> <div class="language- extra-class"><pre class="language-text"><code># to mute logs
geth &lt;other flags&gt; console 2&gt; /dev/null

# to save logs to file
geth &lt;other flags&gt; console --verbosity 3 2&gt; geth-logs.log
</code></pre></div><h2 id="钱包账户导入"><a href="#钱包账户导入" class="header-anchor">#</a> 钱包账户导入</h2> <h3 id="本地账户导入metamask"><a href="#本地账户导入metamask" class="header-anchor">#</a> 本地账户导入Metamask</h3> <ol><li>打开 Metamask 的汇入账户页面</li> <li>选择 JSON 格式档案，即 file_location/keystore 文件夹下的所需账户的密钥文件</li> <li>输入本地账户的密码</li> <li>等待汇入成功</li></ol> <h3 id="metamask账户导入本地区块链"><a href="#metamask账户导入本地区块链" class="header-anchor">#</a> Metamask账户导入本地区块链</h3> <ol><li>打开 Metamask ，选择账户详情-汇出私钥</li> <li>输入 Metamask 账户密码（用助记词导入账户后你创建的密码）</li> <li>复制私钥，随便创建一个 txt 文件并将私钥复制进去</li> <li>输入  <code>geth account import 刚刚创建的 txt 文件路径</code></li> <li>如果路径无误，会提示你输入密码，这个密码就是刚刚那个 Metamask 账户密码</li> <li>输入 <code>geth account list</code> 获取刚刚生成的密钥文件位置</li> <li>将密钥文件复制到 file_location/keystore 文件夹下即可汇入成功</li> <li>启动本地区块链节点，输入 <code>eth.accounts</code> 查看是否新增账户成功</li></ol> <h2 id="geth管理后台常用命令"><a href="#geth管理后台常用命令" class="header-anchor">#</a> Geth管理后台常用命令</h2> <p>管理后台使用的是 js 语言。</p> <h3 id="查看此节点所有账户"><a href="#查看此节点所有账户" class="header-anchor">#</a> 查看此节点所有账户</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span>accounts
</code></pre></div><p>返回一个数组。</p> <h3 id="新建账户"><a href="#新建账户" class="header-anchor">#</a> 新建账户</h3> <p>使用 <code>personal</code> 对象来创建一个账户：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> personal<span class="token punctuation">.</span><span class="token function">newAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token literal-property property">Passphrase</span><span class="token operator">:</span>   <span class="token comment">// 输入密码</span>
Repeat passphrase<span class="token operator">:</span>   <span class="token comment">// 再次输入密码</span>

<span class="token string">&quot;0xc232e2add308136571bb8f9197ba4ae4e5ba9836&quot;</span>
</code></pre></div><p>输入完成后就会显示新创建的账户地址。</p> <p>账户默认会保存在数据目录的 keystore 文件夹中，一个文件对应刚才创建的一个账户。
生成的是 json 格式的文本文件，可以打开查看，里面存的是私钥经过密码加密后的信息。</p> <h3 id="余额查询"><a href="#余额查询" class="header-anchor">#</a> 余额查询</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token string">&quot;0x26eb81b7bb07a517b08833f16061cb62e061eb7d&quot;</span><span class="token punctuation">)</span> #（<span class="token number">1</span>）根据账户地址查询
<span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    #（<span class="token number">2</span>）根据账户列表索引值查询
<span class="token operator">&gt;</span> 
<span class="token operator">&gt;</span> acc0<span class="token operator">=</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>              #设置变量
<span class="token string">&quot;0x26eb81b7bb07a517b08833f16061cb62e061eb7d&quot;</span>
<span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>acc0<span class="token punctuation">)</span>              #（<span class="token number">3</span>）根据设置的变量查询
</code></pre></div><p>可以套娃查询： <code>eth.getBalance(eth.accounts[0])</code></p> <p>查询结果的单位是 <code>Wei</code>。<code>Wei</code> 是以太币的最小单位，1 个以太币 = 10 的 18 次方个 <code>Wei</code>。</p> <h3 id="单位转换"><a href="#单位转换" class="header-anchor">#</a> 单位转换</h3> <p>将返回值换算成以太币：</p> <div class="language- extra-class"><pre class="language-text"><code>web3.fromWei()
</code></pre></div><p>套娃换算成 ETH：<code>web3.fromWei(eth.getBalance(eth.accounts[0]),'ether')</code></p> <h3 id="矿工相关指令"><a href="#矿工相关指令" class="header-anchor">#</a> 矿工相关指令</h3> <ul><li>启动挖矿
miner.start(1)</li></ul> <p>其中 <code>start</code> 的参数表示挖矿使用的线程数。</p> <p>第一次启动挖矿会先生成挖矿所需的 <code>DAG</code> 文件，这个过程有点慢，等进度达到 100% 后，就会开始挖矿，此时屏幕会被挖矿信息刷屏。</p> <ul><li>停止挖矿
miner.stop()</li></ul> <h3 id="查看-coinbase-账户"><a href="#查看-coinbase-账户" class="header-anchor">#</a> 查看 Coinbase 账户</h3> <p>挖到一个区块会奖励 5 个以太币，挖矿所得的奖励会进入矿工的账户，这个账户就是 <code>coinbase</code>。</p> <p>默认情况下 <code>coinbase</code> 是本地账户中的第一个账户：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span>coinbase
<span class="token string">&quot;0xc232e2add308136571bb8f9197ba4ae4e5ba9836&quot;</span>
</code></pre></div><h3 id="修改-coinbase-账户"><a href="#修改-coinbase-账户" class="header-anchor">#</a> 修改 Coinbase 账户</h3> <p>通过 <code>miner.setEtherbase()</code> 将其他账户设置成 <code>coinbase</code> ，使挖矿奖励进入其他账户</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> miner<span class="token punctuation">.</span><span class="token function">setEtherbase</span><span class="token punctuation">(</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>

<span class="token operator">&gt;</span> eth<span class="token punctuation">.</span>coinbase
<span class="token string">&quot;0x814d39aa21f3eed069f2b21da7b5f857f7343afa&quot;</span>
</code></pre></div><h3 id="发起交易"><a href="#发起交易" class="header-anchor">#</a> 发起交易</h3> <p>可以通过 <code>eth.sendTransaction()</code> 发送一笔交易。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> <span class="token keyword">let</span> amount <span class="token operator">=</span> web3<span class="token punctuation">.</span><span class="token function">toWei</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'ether'</span><span class="token punctuation">)</span>
<span class="token string">&quot;5000000000000000000&quot;</span>

<span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">sendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">to</span><span class="token operator">:</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span>amount<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="解锁账户"><a href="#解锁账户" class="header-anchor">#</a> 解锁账户</h3> <p>如果发起交易后返回报错信息：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">Error</span><span class="token operator">:</span> account is locked
    at web3<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">3119</span><span class="token operator">:</span><span class="token number">20</span>
    at web3<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">6023</span><span class="token operator">:</span><span class="token number">15</span>
    at web3<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">4995</span><span class="token operator">:</span><span class="token number">36</span>
    at <span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span>
</code></pre></div><p>这里报错是因为账户每隔一段时间就会被锁住，要发送交易，必须先解锁账户。</p> <p>使用 <code>personal.unlockAccount()</code> 指令解锁账户</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> personal<span class="token punctuation">.</span><span class="token function">unlockAccount</span><span class="token punctuation">(</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Unlock account <span class="token number">0xc232e2add308136571bb8f9197ba4ae4e5ba9836</span>
<span class="token literal-property property">Passphrase</span><span class="token operator">:</span>   <span class="token comment">// 输入密码</span>
<span class="token boolean">true</span>
</code></pre></div><p>重新发起交易：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> amount <span class="token operator">=</span> web3<span class="token punctuation">.</span><span class="token function">toWei</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'ether'</span><span class="token punctuation">)</span>
<span class="token string">&quot;5000000000000000000&quot;</span>
<span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">sendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">to</span><span class="token operator">:</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span>amount<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token constant">I0322</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">39</span><span class="token operator">:</span><span class="token number">36.300675</span> internal<span class="token operator">/</span>ethapi<span class="token operator">/</span>api<span class="token punctuation">.</span>go<span class="token operator">:</span><span class="token number">1047</span><span class="token punctuation">]</span> <span class="token function">Tx</span><span class="token punctuation">(</span><span class="token number">0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825</span><span class="token punctuation">)</span> to<span class="token operator">:</span> <span class="token number">0x814d39aa21f3eed069f2b21da7b5f857f7343afa</span>
<span class="token string">&quot;0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825&quot;</span>
</code></pre></div><p>此时交易已经提交到区块链，返回了交易的 hash。</p> <h3 id="查询交易状态"><a href="#查询交易状态" class="header-anchor">#</a> 查询交易状态</h3> <p>可以通过查看 <code>txpool</code> 指令来验证：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> txpool<span class="token punctuation">.</span>status
<span class="token punctuation">{</span>
  <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">queued</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中有一条 <code>pending</code> 的交易，<code>pending</code> 表示已提交但还未被处理的交易。</p> <p>要使交易被处理，必须要==挖矿==。</p> <p>这里我们使用以下指令：启动挖矿，当挖到一区块后停止挖矿</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> miner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>admin<span class="token punctuation">.</span><span class="token function">sleepBlocks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>miner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当 <code>miner.stop()</code> 返回 <code>true</code> 后，<code>txpool</code> 中 <code>pending</code> 的交易数量应该为 0 了，说明交易已经被处理了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> txpool<span class="token punctuation">.</span>status
<span class="token punctuation">{</span>
  <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">queued</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="查看交易信息"><a href="#查看交易信息" class="header-anchor">#</a> 查看交易信息</h3> <p>通过交易 hash 查看交易：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token string">&quot;0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
  <span class="token literal-property property">blockHash</span><span class="token operator">:</span> <span class="token string">&quot;0xf5d3da50065ce5793c9571a031ad6fe5f1af326a3c4fb7ce16458f4d909c1613&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blockNumber</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">&quot;0xc232e2add308136571bb8f9197ba4ae4e5ba9836&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gas</span><span class="token operator">:</span> <span class="token number">90000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gasPrice</span><span class="token operator">:</span> <span class="token number">20000000000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&quot;0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&quot;0x&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token string">&quot;0x433fe5845391b6da3d8aa0d2b53674e09fb6126f0070a600686809b57e4ef77d&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">s</span><span class="token operator">:</span> <span class="token string">&quot;0x6b0086fb76c46024f849141074a5bc79c49d5f9a658fd0fedbbe354889c34d8d&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&quot;0x814d39aa21f3eed069f2b21da7b5f857f7343afa&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transactionIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">v</span><span class="token operator">:</span> <span class="token string">&quot;0x1b&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">5000000000000000000</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="通过交易哈希查询数据"><a href="#通过交易哈希查询数据" class="header-anchor">#</a> 通过交易哈希查询数据</h3> <p>web3.eth.getTransactionReceipt(hashString [, callback])</p> <p>通过一个交易哈希，返回一个交易的收据。</p> <p>备注：处于<code>pending</code>状态的交易，收据是不可用的。</p> <p>参数：</p> <ul><li><code>String</code> - 交易的哈希</li> <li><code>Function</code> - 回调函数，用于支持异步的方式执行[async]。</li></ul> <p>返回值：</p> <p><code>Object</code> - 交易的收据对象，如果找不到返回<code>null</code></p> <ul><li><code>blockHash</code>: <code>String</code> - 32字节，这个交易所在区块的哈希。</li> <li><code>blockNumber</code>: <code>Number</code> - 交易所在区块的块号。</li> <li><code>transactionHash</code>: <code>String</code> - 32字节，交易的哈希值。</li> <li><code>transactionIndex</code>: <code>Number</code> - 交易在区块里面的序号，整数。</li> <li><code>from</code>: <code>String</code> - 20字节，交易发送者的地址。</li> <li><code>to</code>: <code>String</code> - 20字节，交易接收者的地址。如果是一个合约创建的交易，返回<code>null</code>。</li> <li><code>cumulativeGasUsed</code>: <code>Number</code> - 当前交易执行后累计花费的<code>gas</code>总值<a href="https://web3.tryblockchain.org/Web3.js-api-refrence.html#fn10" target="_blank" rel="noopener noreferrer">10<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li><code>gasUsed</code>: <code>Number</code> - 执行当前这个交易单独花费的<code>gas</code>。</li> <li><code>contractAddress</code>: <code>String</code> - 20字节，创建的合约地址。如果是一个合约创建交易，返回合约地址，其它情况返回<code>null</code>。</li> <li><code>logs</code>: <code>Array</code> - 这个交易产生的日志对象数组。</li></ul> <p>示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token string">&quot;0x64cfb2b5873b0d40e0151334c3024abda3de80faca34b149836dad3efe693d14&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> 
<span class="token punctuation">{</span>
  <span class="token literal-property property">blockHash</span><span class="token operator">:</span> <span class="token string">&quot;0x7f3a99c632eae7258808cde4856b523d55b5975d3a4ceeb8cf5f1cf2780ec90c&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blockNumber</span><span class="token operator">:</span> <span class="token number">49</span><span class="token punctuation">,</span>
  <span class="token literal-property property">contractAddress</span><span class="token operator">:</span> <span class="token string">&quot;0x56ecb23f139ddbcc604fe68c137537151a00ae8a&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cumulativeGasUsed</span><span class="token operator">:</span> <span class="token number">541817</span><span class="token punctuation">,</span>
  <span class="token literal-property property">effectiveGasPrice</span><span class="token operator">:</span> <span class="token number">1000000000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">&quot;0x35d70f53bd45091f204833c7f8481b6adaac58ae&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gasUsed</span><span class="token operator">:</span> <span class="token number">541817</span><span class="token punctuation">,</span>
  <span class="token literal-property property">logs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">logsBloom</span><span class="token operator">:</span> <span class="token string">&quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&quot;0xeb799d28bdf450fa1b9ad549a185b2e694832b48f462288541f0d926b8a9e02c&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transactionHash</span><span class="token operator">:</span> <span class="token string">&quot;0x64cfb2b5873b0d40e0151334c3024abda3de80faca34b149836dad3efe693d14&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transactionIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;0x0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="查看当前区块总数"><a href="#查看当前区块总数" class="header-anchor">#</a> 查看当前区块总数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span>blockNumber
<span class="token number">33</span>
</code></pre></div><h3 id="查看区块"><a href="#查看区块" class="header-anchor">#</a> 查看区块</h3> <p>通过区块号查看区块：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> eth<span class="token punctuation">.</span><span class="token function">getBlock</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">33</span></span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
  <span class="token literal-property property">difficulty</span><span class="token operator">:</span> <span class="token number">132928</span><span class="token punctuation">,</span>
  <span class="token literal-property property">extraData</span><span class="token operator">:</span> <span class="token string">&quot;0xd783010506846765746887676f312e372e33856c696e7578&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gasLimit</span><span class="token operator">:</span> <span class="token number">3244382</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gasUsed</span><span class="token operator">:</span> <span class="token number">21000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&quot;0xf5d3da50065ce5793c9571a031ad6fe5f1af326a3c4fb7ce16458f4d909c1613&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">logsBloom</span><span class="token operator">:</span> <span class="token string">&quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">miner</span><span class="token operator">:</span> <span class="token string">&quot;0xc232e2add308136571bb8f9197ba4ae4e5ba9836&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mixHash</span><span class="token operator">:</span> <span class="token string">&quot;0x09849dff7c8b8467812fa80d1fa2a27bc61f1cf16d5b2c05a6ce1b77ee18f3f1&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token string">&quot;0x5b3939449dbdbea0&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parentHash</span><span class="token operator">:</span> <span class="token string">&quot;0xeca34637642f56f7cfe5b699031c7ddbc43aee00fb10c7f054e0a9719cf226da&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">receiptsRoot</span><span class="token operator">:</span> <span class="token string">&quot;0xd5f5b7ee944e57cbff496f7bdda7ceffd5eedffe6d5be5320008190502adc07a&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sha3Uncles</span><span class="token operator">:</span> <span class="token string">&quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">649</span><span class="token punctuation">,</span>
  <span class="token literal-property property">stateRoot</span><span class="token operator">:</span> <span class="token string">&quot;0xc7add6b756980ab9e482766e455597ef1583e747ad62e2924a8e66c6f9170112&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token number">1490183209</span><span class="token punctuation">,</span>
  <span class="token literal-property property">totalDifficulty</span><span class="token operator">:</span> <span class="token number">4358016</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transactions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transactionsRoot</span><span class="token operator">:</span> <span class="token string">&quot;0x7335a362b2c3925e7ba1b41bf7772aa9645a13d4f9c12edd5892b87887264232&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uncles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="连接到其他节点"><a href="#连接到其他节点" class="header-anchor">#</a> 连接到其他节点</h3> <p>通过 <code>admin.addPeer()</code> 方法连接到其他节点。</p> <blockquote><p>两个节点要想联通，必须保证网络是相通的，并且要指定相同的 networkid。</p></blockquote> <p>除了使用本指令，也可以在启动节点的时候指定 <code>--bootnodes</code> 选项连接到其他节点。</p> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <p>假设有两个节点：节点一和节点二，networkid 都是 1108，通过下面的步骤就可以从节点一连接到节点二。</p> <p>首先要知道节点二的 <code>enode</code> 信息，在节点二的 js console 中执行下面的命令查看 <code>enode</code> 信息：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> admin<span class="token punctuation">.</span>nodeInfo<span class="token punctuation">.</span>enode
<span class="token string">&quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304&quot;</span>
</code></pre></div><p>然后在节点一的 js console 中执行 <code>admin.addPeer()</code>，就可以连接到节点二：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> admin<span class="token punctuation">.</span><span class="token function">addPeer</span><span class="token punctuation">(</span><span class="token string">&quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@127.0.0.1:30304&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><code>addPeer()</code> 的参数就是节点二的 <code>enode</code> 信息。</p> <blockquote><p>注意要把 <code>enode</code> 中的 <code>[::]</code> 替换成节点二的 IP 地址。</p></blockquote> <p>连接成功后，节点二就会开始同步节点一的区块。</p> <p>同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。</p> <h3 id="查看其他连接节点"><a href="#查看其他连接节点" class="header-anchor">#</a> 查看其他连接节点</h3> <p>通过 <code>admin.peers</code> 可以查看连接到的其他节点信息。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> admin<span class="token punctuation">.</span>peers
</code></pre></div><h3 id="查看已连接节点数"><a href="#查看已连接节点数" class="header-anchor">#</a> 查看已连接节点数</h3> <p>通过 <code>admin.net.peerCount</code> 可以查看已连接到的节点数量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> admin<span class="token punctuation">.</span>net<span class="token punctuation">.</span>peerCount
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">2023/3/15 11:12:21</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.9edf8fdb.js" defer></script><script src="/blog/assets/js/2.2defd20b.js" defer></script><script src="/blog/assets/js/13.b46fb602.js" defer></script>
  </body>
</html>
