(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{279:function(t,a,s){"use strict";s.r(a);var e=s(13),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前期准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[t._v("#")]),t._v(" 前期准备")]),t._v(" "),a("h3",{attrs:{id:"step-1-客户端下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-客户端下载"}},[t._v("#")]),t._v(" Step 1 ：客户端下载")]),t._v(" "),a("p",[t._v("下载geth客户端  https://geth.ethereum.org/downloads/")]),t._v(" "),a("h3",{attrs:{id:"step-2-准备目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-准备目录结构"}},[t._v("#")]),t._v(" Step 2：准备目录结构")]),t._v(" "),a("p",[t._v("随便新建个文件夹放数据，目录结构如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("document\n|--file_location // 这个里面放geth生成的数据啥的\n|\n|--genesis.json // 创世区块配置文件\n")])])]),a("h3",{attrs:{id:"step-3-准备创世区块配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-3-准备创世区块配置文件"}},[t._v("#")]),t._v(" Step 3：准备创世区块配置文件")]),t._v(" "),a("p",[t._v("genesis.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//区块链的ID，随便起")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chainId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"homesteadBlock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip150Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip155Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eip158Block"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用来预置账号以及账号内的以太币数量，应该也就是所谓的预挖")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我这里不需要预挖，所以给了个空对象")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果需要可以这样加")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "alloc": {')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//            "0x0000000000000000000000000000000000000001": {"balance": "111111111"},')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//            "0x0000000000000000000000000000000000000002": {"balance": "222222222"}')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         }")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alloc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 币基地址，也就是默认的钱包地址，因为我没有地址，所以全0，为空")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 后面运行Geth后创建新账户时，如果Geth发现没有币基地址，会默认将第一个账户的地址设置为币基地址")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也就是矿工账号")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"coinbase"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 出块/挖矿难度，你可以随便控制哦，这里设置的难度比较小，因为我喜欢钱来得快")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"difficulty"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x4000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 附加信息，随便填个文本或不填也行，类似中本聪在比特币创世块中写的报纸新闻")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extraData"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gas最高限制，以太坊运行交易，合约等所消耗的gas最高限制，这里设置为最高")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gasLimit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xffffffff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊黄皮书中的要求")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 直接用我这个也可以")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000042"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 与nonce共同用于挖矿，注意他和nonce的设置需要满足以太坊黄皮书中的要求")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mixhash"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上一个区块的Hash值，因为是创世块，石头里蹦出来的，没有在它前面的，所以是0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parentHash"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创世块的时间戳，这里给0就好")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x00"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意 genesis.json 文件里不能有注释，用的时候记得删了！")])]),t._v(" "),a("p",[t._v("对应字段说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[a("strong",[t._v("key")])]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("说明")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("chainId")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("网络ID，区分不同的区块链网络，值为0代表以太坊主网")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("coinbase")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("一个账户地址，挖矿收益最终归属的账户")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("difficulty")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("挖矿难度")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("gasLimit")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("创世块能够消耗gas的上限，即最多消耗的gas值；智能合约运行在EVM上，运行机器码指令，每个指令都会对应相应的gas消耗，gas与以太不是等价的，它们之前有换算关系，gas * gasPrice = ether， gasPrice是gas单价（单位wei），可以上下浮动（感觉跟市场油价一样会发生变动）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("nonce")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("随机数，挖矿的时候寻找到符合条件的nonce值")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("mixhash")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("本块的hash值，因为是创世块，所以没有hash值，初始化为0")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("parentHash")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("父块hash值，因为是创世块，所以没有父块hash值，初始化为0")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("timestamp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("时间戳，是从1970-01-01 00:00:00开始计算以秒为单位")])])])]),t._v(" "),a("h2",{attrs:{id:"geth常用参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geth常用参数说明"}},[t._v("#")]),t._v(" Geth常用参数说明")]),t._v(" "),a("blockquote",[a("p",[t._v("可以通过 "),a("code",[t._v("geth -h")]),t._v(" 帮助指令查看所以指令及对应功能说明，以下常用指令说明")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("指令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--datadir")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指定之前初始化的数据目录文件（指定工作目录）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--networkid")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("区分不同的区块链网络，与创世块chainId一样，0为以太坊主网")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--port")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("节点之间互相通信的端囗，默认是30303")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--rpc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开启远程调用服务，执行智能合约时连接的节点是借助于rpc服务")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--rpcport")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("远程服务端囗，默认是8545")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--rpcapi")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("span",{staticStyle:{"white-space":"pre"}}),t._v("远程服务提供的远程服务调用函数集（db、net、eth、web3、personal等）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--rpccorsdomain")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指定可以接收请求来源的域名列表（浏览器访问时必须开启），默认为 “"),a("code",[t._v("*")]),t._v("”")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--gasprice")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("gas的单价，单位wei")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--allow-insecure-unlock")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("允许在Geth命令窗囗解锁账户（新版本1.9.0+增加的选项）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--console")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("进入管理后台（如修改rpc端囗）")])])])]),t._v(" "),a("h2",{attrs:{id:"geth常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geth常用命令"}},[t._v("#")]),t._v(" Geth常用命令")]),t._v(" "),a("h3",{attrs:{id:"初始化命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化命令"}},[t._v("#")]),t._v(" 初始化命令")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("第一次安装完Geth需要初始化，或是需要修改创世块重新设置时需要初始化，之后再不需要初始化。\n")])])]),a("p",[t._v("cmd 进入到 file_location 文件夹(也就是 genesis.json 所在的文件夹)")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("geth --datadir file_location init genesis.json\n")])])]),a("p",[a("code",[t._v("geth ...... init")]),t._v("：初始化区块链\n参数：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--datadir file_location")]),t._v("：指定数据存放目录为 file_location 位置，file_location 为目录名")]),t._v(" "),a("li",[a("code",[t._v("genesis.json")]),t._v(" 是 "),a("code",[t._v("init")]),t._v(" 的命令参数，表示使用此 json 文件进行初始化")])]),t._v(" "),a("blockquote",[a("p",[t._v("初始化最后输出 "),a("code",[t._v("Successfully xxxxx")]),t._v(" 就代表成功了")])]),t._v(" "),a("p",[t._v("生成目录结构")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("document\n├──file_location\n│   ├── geth\n│   │   ├── chaindata\n│   │   │   ├── 000001.log\n│   │   │   ├── CURRENT\n│   │   │   ├── LOCK\n│   │   │   ├── LOG\n│   │   │   └── MANIFEST-000000\n│   │   └── lightchaindata\n│   │       ├── 000001.log\n│   │       ├── CURRENT\n│   │       ├── LOCK\n│   │       ├── LOG\n│   │       └── MANIFEST-000000\n│   └── keystore       // 这里以后会放在此节点创建的账号文件啥的\n│           ├── \n└── genesis.json\n \n")])])]),a("h3",{attrs:{id:"开启节点命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启节点命令"}},[t._v("#")]),t._v(" 开启节点命令")]),t._v(" "),a("p",[t._v("cmd 进入到 document 文件夹(也就是 file_location 上层文件夹)")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('geth --datadir file_location --networkid 202339 --http --http.addr 0.0.0.0 --http.port 8545 --http.corsdomain "*" --port 30305 --allow-insecure-unlock console\n')])])]),a("ul",[a("li",[a("code",[t._v("--networkid")]),t._v("：用于区分不同的区块链网络，与创世块chainId一样，0为以太坊主网")]),t._v(" "),a("li",[a("code",[t._v("--http")]),t._v(" "),a("ul",[a("li",[a("code",[t._v(".addr")])]),t._v(" "),a("li",[a("code",[t._v(".port")])]),t._v(" "),a("li",[a("code",[t._v(".corsdomain")])])])]),t._v(" "),a("li",[a("code",[t._v("--port")])]),t._v(" "),a("li",[a("code",[t._v("--allow-insecure-unlock")])])]),t._v(" "),a("p",[t._v("运行完上面的代码后cmd内应该输出 "),a("code",[t._v("Welcome to the Geth JavaScript console!")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("可能出现的报错")]),t._v(" "),a("ul",[a("li",[t._v("错误1："),a("code",[t._v("Fatal: Error starting protocol stack: Access is denied.")]),t._v(" "),a("ul",[a("li",[t._v("错误原因：因为你开启了 2 个或以上的 geth 进程。")]),t._v(" "),a("li",[t._v("解决方法：需要关闭另外的 ethereum 客户端。")])])])])]),t._v(" "),a("p",[t._v("从cmd连接刚刚启动的私有链的控制台\n"),a("code",[t._v("geth attach ipc:http://127.0.0.1:8545")])]),t._v(" "),a("p",[t._v("删除 filename位置的块\n"),a("code",[t._v("geth removedb --datadir filename")])]),t._v(" "),a("h3",{attrs:{id:"日志相关指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志相关指令"}},[t._v("#")]),t._v(" 日志相关指令")]),t._v(" "),a("p",[t._v("在启动 Geth 的指令后加 "),a("code",[t._v("console")]),t._v(" 指令就可以开启节点的同时开启 console控制台。")]),t._v(" "),a("p",[t._v("但是节点启动后会一直在终端打印日志，这个时候可以使用以下两种指令来停止终端打印日志。")]),t._v(" "),a("p",[t._v("如果不需要日志，将他们重定向到 "),a("code",[t._v("dev/null")]),t._v(" 的位置即可；如果还需要日志，那么可以把 "),a("code",[t._v("dev/null")]),t._v(" 的路径换成一个文本文件的路径，日志将会被存入其中。")]),t._v(" "),a("p",[t._v("日志中提供的详细程度可以通过向 "),a("code",[t._v("--verbosity")]),t._v(" 标志提供一个1-6之间的值来调整，如下例所示。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# to mute logs\ngeth <other flags> console 2> /dev/null\n\n# to save logs to file\ngeth <other flags> console --verbosity 3 2> geth-logs.log\n")])])]),a("h2",{attrs:{id:"钱包账户导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#钱包账户导入"}},[t._v("#")]),t._v(" 钱包账户导入")]),t._v(" "),a("h3",{attrs:{id:"本地账户导入metamask"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地账户导入metamask"}},[t._v("#")]),t._v(" 本地账户导入Metamask")]),t._v(" "),a("ol",[a("li",[t._v("打开 Metamask 的汇入账户页面")]),t._v(" "),a("li",[t._v("选择 JSON 格式档案，即 file_location/keystore 文件夹下的所需账户的密钥文件")]),t._v(" "),a("li",[t._v("输入本地账户的密码")]),t._v(" "),a("li",[t._v("等待汇入成功")])]),t._v(" "),a("h3",{attrs:{id:"metamask账户导入本地区块链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metamask账户导入本地区块链"}},[t._v("#")]),t._v(" Metamask账户导入本地区块链")]),t._v(" "),a("ol",[a("li",[t._v("打开 Metamask ，选择账户详情-汇出私钥")]),t._v(" "),a("li",[t._v("输入 Metamask 账户密码（用助记词导入账户后你创建的密码）")]),t._v(" "),a("li",[t._v("复制私钥，随便创建一个 txt 文件并将私钥复制进去")]),t._v(" "),a("li",[t._v("输入  "),a("code",[t._v("geth account import 刚刚创建的 txt 文件路径")])]),t._v(" "),a("li",[t._v("如果路径无误，会提示你输入密码，这个密码就是刚刚那个 Metamask 账户密码")]),t._v(" "),a("li",[t._v("输入 "),a("code",[t._v("geth account list")]),t._v(" 获取刚刚生成的密钥文件位置")]),t._v(" "),a("li",[t._v("将密钥文件复制到 file_location/keystore 文件夹下即可汇入成功")]),t._v(" "),a("li",[t._v("启动本地区块链节点，输入 "),a("code",[t._v("eth.accounts")]),t._v(" 查看是否新增账户成功")])]),t._v(" "),a("h2",{attrs:{id:"geth管理后台常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geth管理后台常用命令"}},[t._v("#")]),t._v(" Geth管理后台常用命令")]),t._v(" "),a("p",[t._v("管理后台使用的是 js 语言。")]),t._v(" "),a("h3",{attrs:{id:"查看此节点所有账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看此节点所有账户"}},[t._v("#")]),t._v(" 查看此节点所有账户")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts\n")])])]),a("p",[t._v("返回一个数组。")]),t._v(" "),a("h3",{attrs:{id:"新建账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建账户"}},[t._v("#")]),t._v(" 新建账户")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("personal")]),t._v(" 对象来创建一个账户：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Passphrase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输入密码")]),t._v("\nRepeat passphrase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再次输入密码")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xc232e2add308136571bb8f9197ba4ae4e5ba9836"')]),t._v("\n")])])]),a("p",[t._v("输入完成后就会显示新创建的账户地址。")]),t._v(" "),a("p",[t._v("账户默认会保存在数据目录的 keystore 文件夹中，一个文件对应刚才创建的一个账户。\n生成的是 json 格式的文本文件，可以打开查看，里面存的是私钥经过密码加密后的信息。")]),t._v(" "),a("h3",{attrs:{id:"余额查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#余额查询"}},[t._v("#")]),t._v(" 余额查询")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x26eb81b7bb07a517b08833f16061cb62e061eb7d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" #（"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("）根据账户地址查询\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    #（"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）根据账户列表索引值查询\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" acc0"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("              #设置变量\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x26eb81b7bb07a517b08833f16061cb62e061eb7d"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("acc0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("              #（"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）根据设置的变量查询\n")])])]),a("p",[t._v("可以套娃查询： "),a("code",[t._v("eth.getBalance(eth.accounts[0])")])]),t._v(" "),a("p",[t._v("查询结果的单位是 "),a("code",[t._v("Wei")]),t._v("。"),a("code",[t._v("Wei")]),t._v(" 是以太币的最小单位，1 个以太币 = 10 的 18 次方个 "),a("code",[t._v("Wei")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"单位转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单位转换"}},[t._v("#")]),t._v(" 单位转换")]),t._v(" "),a("p",[t._v("将返回值换算成以太币：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("web3.fromWei()\n")])])]),a("p",[t._v("套娃换算成 ETH："),a("code",[t._v("web3.fromWei(eth.getBalance(eth.accounts[0]),'ether')")])]),t._v(" "),a("h3",{attrs:{id:"矿工相关指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#矿工相关指令"}},[t._v("#")]),t._v(" 矿工相关指令")]),t._v(" "),a("ul",[a("li",[t._v("启动挖矿\nminer.start(1)")])]),t._v(" "),a("p",[t._v("其中 "),a("code",[t._v("start")]),t._v(" 的参数表示挖矿使用的线程数。")]),t._v(" "),a("p",[t._v("第一次启动挖矿会先生成挖矿所需的 "),a("code",[t._v("DAG")]),t._v(" 文件，这个过程有点慢，等进度达到 100% 后，就会开始挖矿，此时屏幕会被挖矿信息刷屏。")]),t._v(" "),a("ul",[a("li",[t._v("停止挖矿\nminer.stop()")])]),t._v(" "),a("h3",{attrs:{id:"查看-coinbase-账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-coinbase-账户"}},[t._v("#")]),t._v(" 查看 Coinbase 账户")]),t._v(" "),a("p",[t._v("挖到一个区块会奖励 5 个以太币，挖矿所得的奖励会进入矿工的账户，这个账户就是 "),a("code",[t._v("coinbase")]),t._v("。")]),t._v(" "),a("p",[t._v("默认情况下 "),a("code",[t._v("coinbase")]),t._v(" 是本地账户中的第一个账户：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("coinbase\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xc232e2add308136571bb8f9197ba4ae4e5ba9836"')]),t._v("\n")])])]),a("h3",{attrs:{id:"修改-coinbase-账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-coinbase-账户"}},[t._v("#")]),t._v(" 修改 Coinbase 账户")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("miner.setEtherbase()")]),t._v(" 将其他账户设置成 "),a("code",[t._v("coinbase")]),t._v(" ，使挖矿奖励进入其他账户")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" miner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEtherbase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("coinbase\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x814d39aa21f3eed069f2b21da7b5f857f7343afa"')]),t._v("\n")])])]),a("h3",{attrs:{id:"发起交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发起交易"}},[t._v("#")]),t._v(" 发起交易")]),t._v(" "),a("p",[t._v("可以通过 "),a("code",[t._v("eth.sendTransaction()")]),t._v(" 发送一笔交易。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" amount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toWei")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ether'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5000000000000000000"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("amount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"解锁账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解锁账户"}},[t._v("#")]),t._v(" 解锁账户")]),t._v(" "),a("p",[t._v("如果发起交易后返回报错信息：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" account is locked\n    at web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3119")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n    at web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6023")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n    at web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4995")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36")]),t._v("\n    at "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("anonymous"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[t._v("这里报错是因为账户每隔一段时间就会被锁住，要发送交易，必须先解锁账户。")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("personal.unlockAccount()")]),t._v(" 指令解锁账户")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" personal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlockAccount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nUnlock account "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xc232e2add308136571bb8f9197ba4ae4e5ba9836")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Passphrase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输入密码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("p",[t._v("重新发起交易：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" amount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toWei")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ether'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5000000000000000000"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("amount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("I0322")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36.300675")]),t._v(" internal"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ethapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("go"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1047")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Tx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x814d39aa21f3eed069f2b21da7b5f857f7343afa")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825"')]),t._v("\n")])])]),a("p",[t._v("此时交易已经提交到区块链，返回了交易的 hash。")]),t._v(" "),a("h3",{attrs:{id:"查询交易状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询交易状态"}},[t._v("#")]),t._v(" 查询交易状态")]),t._v(" "),a("p",[t._v("可以通过查看 "),a("code",[t._v("txpool")]),t._v(" 指令来验证：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" txpool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pending")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("queued")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("其中有一条 "),a("code",[t._v("pending")]),t._v(" 的交易，"),a("code",[t._v("pending")]),t._v(" 表示已提交但还未被处理的交易。")]),t._v(" "),a("p",[t._v("要使交易被处理，必须要==挖矿==。")]),t._v(" "),a("p",[t._v("这里我们使用以下指令：启动挖矿，当挖到一区块后停止挖矿")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" miner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleepBlocks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("miner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("当 "),a("code",[t._v("miner.stop()")]),t._v(" 返回 "),a("code",[t._v("true")]),t._v(" 后，"),a("code",[t._v("txpool")]),t._v(" 中 "),a("code",[t._v("pending")]),t._v(" 的交易数量应该为 0 了，说明交易已经被处理了：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" txpool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pending")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("queued")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"查看交易信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看交易信息"}},[t._v("#")]),t._v(" 查看交易信息")]),t._v(" "),a("p",[t._v("通过交易 hash 查看交易：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("blockHash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xf5d3da50065ce5793c9571a031ad6fe5f1af326a3c4fb7ce16458f4d909c1613"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("blockNumber")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xc232e2add308136571bb8f9197ba4ae4e5ba9836"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gas")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("90000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gasPrice")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("nonce")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("r")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x433fe5845391b6da3d8aa0d2b53674e09fb6126f0070a600686809b57e4ef77d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x6b0086fb76c46024f849141074a5bc79c49d5f9a658fd0fedbbe354889c34d8d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x814d39aa21f3eed069f2b21da7b5f857f7343afa"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transactionIndex")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("v")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x1b"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000000000000000000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"通过交易哈希查询数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过交易哈希查询数据"}},[t._v("#")]),t._v(" 通过交易哈希查询数据")]),t._v(" "),a("p",[t._v("web3.eth.getTransactionReceipt(hashString [, callback])")]),t._v(" "),a("p",[t._v("通过一个交易哈希，返回一个交易的收据。")]),t._v(" "),a("p",[t._v("备注：处于"),a("code",[t._v("pending")]),t._v("状态的交易，收据是不可用的。")]),t._v(" "),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("String")]),t._v(" - 交易的哈希")]),t._v(" "),a("li",[a("code",[t._v("Function")]),t._v(" - 回调函数，用于支持异步的方式执行[async]。")])]),t._v(" "),a("p",[t._v("返回值：")]),t._v(" "),a("p",[a("code",[t._v("Object")]),t._v(" - 交易的收据对象，如果找不到返回"),a("code",[t._v("null")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("blockHash")]),t._v(": "),a("code",[t._v("String")]),t._v(" - 32字节，这个交易所在区块的哈希。")]),t._v(" "),a("li",[a("code",[t._v("blockNumber")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - 交易所在区块的块号。")]),t._v(" "),a("li",[a("code",[t._v("transactionHash")]),t._v(": "),a("code",[t._v("String")]),t._v(" - 32字节，交易的哈希值。")]),t._v(" "),a("li",[a("code",[t._v("transactionIndex")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - 交易在区块里面的序号，整数。")]),t._v(" "),a("li",[a("code",[t._v("from")]),t._v(": "),a("code",[t._v("String")]),t._v(" - 20字节，交易发送者的地址。")]),t._v(" "),a("li",[a("code",[t._v("to")]),t._v(": "),a("code",[t._v("String")]),t._v(" - 20字节，交易接收者的地址。如果是一个合约创建的交易，返回"),a("code",[t._v("null")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("cumulativeGasUsed")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - 当前交易执行后累计花费的"),a("code",[t._v("gas")]),t._v("总值"),a("a",{attrs:{href:"https://web3.tryblockchain.org/Web3.js-api-refrence.html#fn10",target:"_blank",rel:"noopener noreferrer"}},[t._v("10"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("gasUsed")]),t._v(": "),a("code",[t._v("Number")]),t._v(" - 执行当前这个交易单独花费的"),a("code",[t._v("gas")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("contractAddress")]),t._v(": "),a("code",[t._v("String")]),t._v(" - 20字节，创建的合约地址。如果是一个合约创建交易，返回合约地址，其它情况返回"),a("code",[t._v("null")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("logs")]),t._v(": "),a("code",[t._v("Array")]),t._v(" - 这个交易产生的日志对象数组。")])]),t._v(" "),a("p",[t._v("示例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTransactionReceipt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x64cfb2b5873b0d40e0151334c3024abda3de80faca34b149836dad3efe693d14"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("blockHash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7f3a99c632eae7258808cde4856b523d55b5975d3a4ceeb8cf5f1cf2780ec90c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("blockNumber")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("contractAddress")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x56ecb23f139ddbcc604fe68c137537151a00ae8a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cumulativeGasUsed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("541817")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("effectiveGasPrice")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x35d70f53bd45091f204833c7f8481b6adaac58ae"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gasUsed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("541817")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logsBloom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("root")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeb799d28bdf450fa1b9ad549a185b2e694832b48f462288541f0d926b8a9e02c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transactionHash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x64cfb2b5873b0d40e0151334c3024abda3de80faca34b149836dad3efe693d14"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transactionIndex")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"查看当前区块总数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看当前区块总数"}},[t._v("#")]),t._v(" 查看当前区块总数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blockNumber\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),t._v("\n")])])]),a("h3",{attrs:{id:"查看区块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看区块"}},[t._v("#")]),t._v(" 查看区块")]),t._v(" "),a("p",[t._v("通过区块号查看区块：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("difficulty")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("132928")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("extraData")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd783010506846765746887676f312e372e33856c696e7578"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gasLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3244382")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gasUsed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xf5d3da50065ce5793c9571a031ad6fe5f1af326a3c4fb7ce16458f4d909c1613"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logsBloom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("miner")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xc232e2add308136571bb8f9197ba4ae4e5ba9836"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mixHash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x09849dff7c8b8467812fa80d1fa2a27bc61f1cf16d5b2c05a6ce1b77ee18f3f1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("nonce")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x5b3939449dbdbea0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parentHash")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeca34637642f56f7cfe5b699031c7ddbc43aee00fb10c7f054e0a9719cf226da"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("receiptsRoot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd5f5b7ee944e57cbff496f7bdda7ceffd5eedffe6d5be5320008190502adc07a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sha3Uncles")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("649")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("stateRoot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xc7add6b756980ab9e482766e455597ef1583e747ad62e2924a8e66c6f9170112"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timestamp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1490183209")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("totalDifficulty")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4358016")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transactions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x0c59f431068937cbe9e230483bc79f59bd7146edc8ff5ec37fea6710adcab825"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transactionsRoot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7335a362b2c3925e7ba1b41bf7772aa9645a13d4f9c12edd5892b87887264232"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uncles")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"连接到其他节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接到其他节点"}},[t._v("#")]),t._v(" 连接到其他节点")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("admin.addPeer()")]),t._v(" 方法连接到其他节点。")]),t._v(" "),a("blockquote",[a("p",[t._v("两个节点要想联通，必须保证网络是相通的，并且要指定相同的 networkid。")])]),t._v(" "),a("p",[t._v("除了使用本指令，也可以在启动节点的时候指定 "),a("code",[t._v("--bootnodes")]),t._v(" 选项连接到其他节点。")]),t._v(" "),a("h4",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("p",[t._v("假设有两个节点：节点一和节点二，networkid 都是 1108，通过下面的步骤就可以从节点一连接到节点二。")]),t._v(" "),a("p",[t._v("首先要知道节点二的 "),a("code",[t._v("enode")]),t._v(" 信息，在节点二的 js console 中执行下面的命令查看 "),a("code",[t._v("enode")]),t._v(" 信息：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enode\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304"')]),t._v("\n")])])]),a("p",[t._v("然后在节点一的 js console 中执行 "),a("code",[t._v("admin.addPeer()")]),t._v("，就可以连接到节点二：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPeer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@127.0.0.1:30304"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("addPeer()")]),t._v(" 的参数就是节点二的 "),a("code",[t._v("enode")]),t._v(" 信息。")]),t._v(" "),a("blockquote",[a("p",[t._v("注意要把 "),a("code",[t._v("enode")]),t._v(" 中的 "),a("code",[t._v("[::]")]),t._v(" 替换成节点二的 IP 地址。")])]),t._v(" "),a("p",[t._v("连接成功后，节点二就会开始同步节点一的区块。")]),t._v(" "),a("p",[t._v("同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。")]),t._v(" "),a("h3",{attrs:{id:"查看其他连接节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看其他连接节点"}},[t._v("#")]),t._v(" 查看其他连接节点")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("admin.peers")]),t._v(" 可以查看连接到的其他节点信息。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("peers\n")])])]),a("h3",{attrs:{id:"查看已连接节点数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看已连接节点数"}},[t._v("#")]),t._v(" 查看已连接节点数")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("admin.net.peerCount")]),t._v(" 可以查看已连接到的节点数量。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("peerCount\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);